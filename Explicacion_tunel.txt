Como hacer la tunelizacion?

1 - Definir las variables para el tunel

* Variables:
ssh_host --> IP PUBLICA de la instancia EC2
ssh_user --> nombre de usuario de la instancia EC2

ssh_pem_key_path --> Como trabajamos con claves publicas y privadas tenemos que establecer la direccion de la clave publica.
Esta sera tomada por MySQL, y la decodificada automaticamente (internamente se transforma en un .ppk).

2 - Creamos el tunel y lo "encedemos"

tunel = SSHTunnelForwarder(
    (ssh_host, 22), # 22 es el puerto de ssh
    ssh_username=ssh_user,
    ssh_pkey=ssh_pem_key_path,  # Ruta al archivo .pem

    #--> Conecta el puerto 3306 de la EC2. Localhost indica que vamos a usar el MYSQL de la MV.
    remote_bind_address=('127.0.0.1', 3306) 
)

tunel.start()

3 - Conexion a la base de datos

en este punto ya nos conectamos por el tunel a la base de datos. Entonces todo trabajo sobre la base de datos, tiene que ser
tratado de una forma "local", ya que realmente estamos trabajando de forma local sobre la base de datos, de una forma remota.

* variables:
mysql_host --> '127.0.0.1'
mysql_port --> Indica a que puerto de mi computadora se conecto el tunel. Se asigna tunel.local_bind_port
mysql_user --> usario de la bdd
mysql_password --> contraseÃ±a
database --> base de datos

* Conectar a la bdd: 

conn = pymysql.connect(
            host='127.0.0.1',
            port = tunel.local_bind_port,
            user='root',
            password=mysql_password,
            database=mysql_database
        )

cursor = conn.cursor()